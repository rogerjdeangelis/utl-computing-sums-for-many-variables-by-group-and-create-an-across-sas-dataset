%let pgm=utl-computing-sums-for-many-variables-by-group-and-create-an-across-sas-dataset;

Only proc report can solve this simple problem?

     Solutions
        0 proc summary
        1 proc report
        2 sas datastep
        3 sas do_over
        4 r do_over
        5 python do_over
        6 tabulate with out macro (general technique for converting tabulate printed output to a sas dataset)
        7 tabulate with macro (general technique for converting tabulate printed output to a sas dataset)

github
https://tinyurl.com/hdhebcb2
https://github.com/rogerjdeangelis/utl-computing-sums-for-many-variables-by-group-and-create-an-across-sas-dataset


/*               _     _
 _ __  _ __ ___ | |__ | | ___ _ __ ___
| `_ \| `__/ _ \| `_ \| |/ _ \ `_ ` _ \
| |_) | | | (_) | |_) | |  __/ | | | | |
| .__/|_|  \___/|_.__/|_|\___|_| |_| |_|
|_|
*/

/****************************************************************************************************************************/
/*                                     |                                    |                                               */
/*             INPUT                   |           PROCESS                  |        OUTPUT (work.xcr)                      */
/*                                     |                                    |                                               */
/*                                     |                                    |                                               */
/* L XA XB XC XD XE XF XG XH XI XJ XK  | proc report data=sd1.have out=xcr; | L  XA  XB  XC  XD  XE  XF  XG  XH  XI  XJ  XK */
/*                                     |   cols _all_;                      |                                               */
/* A 30 77 67 87 32 32 29 49 24 67 34  |   define l / group;                | A  86 114 104 112 127  58  93 125 112 126  90 */
/* A 56 37 37 25 95 26 64 76 88 59 56  |   define _numeric_ / display sum;  |                                               */
/*                                     | run;quit;                          |                                               */
/*                                     |                                    |                                               */
/* B 19 89 26 80 96 40 16 32 13 79 75  |                                    | B  55 161  68 110 133 100  29  48  75 173 149 */
/* B 36 72 42 30 37 60 13 16 62 94 74  | proc summary data=sd1.have nway;   |                                               */
/*                                     |   class l;                         |                                               */
/* C 17 88 46 88 95 65 29 25 56 34 88  |   var _numeric_;                   | C  65 126  75 159 117 109  44  47 130  83 119 */
/* C 48 38 29 71 22 44 15 22 74 49 31  |   output out=result                | D  92  94  81  88  97  14  19  40  42  72  22 */
/* D 92 94 81 88 97 14 19 40 42 72 22  |     (drop=_type_ _freq_) sum=;     | E  47  14  84  31  24  25  52  92  19  69  85 */
/* E 47 14 84 31 24 25 52 92 19 69 85  | run;                               | F  69  48  57  77  19  23  31  69  60  21  69 */
/* F 69 48 57 77 19 23 31 69 60 21 69  |                                    | G  68  32  64  13  93  22  87  81  85  60  15 */
/* G 68 32 64 13 93 22 87 81 85 60 15  |                                    | H  94  63 107  40 121  67 141 188 106  56 135 */
/* H 10 42 92 27 24 41 55 90 45 14 36  |                                    | I  35  23  14  97  18  60  80  17  80  44  83 */
/* H 84 21 15 13 97 26 86 98 61 42 99  |                                    | J 112  38 124 127 167  76  55  57 127 148  41 */
/* I 35 23 14 97 18 60 80 17 80 44 83  |                                    | K  84  17  10  24  76  78  56  80  24  27  92 */
/* J 40 14 80 78 90 60 15 44 89 65 13  |                                    | L  13  41  72  54  86  34  84  54  84  87  33 */
/* J 72 24 44 49 77 16 40 13 38 83 28  |                                    | M  53  26  82  55  68  56  31  95  85  90  48 */
/* K 84 17 10 24 76 78 56 80 24 27 92  |                                    | N  43  99  27  46  59  12  64  74  30  27  32 */
/* L 13 41 72 54 86 34 84 54 84 87 33  |                                    | O  98  73  39  47  67  47  74  79  70  50  66 */
/* M 53 26 82 55 68 56 31 95 85 90 48  |                                    |                                               */
/* N 43 99 27 46 59 12 64 74 30 27 32  |                                    |                                               */
/* O 98 73 39 47 67 47 74 79 70 50 66  |                                    |                                               */
/*                                     |                                    |                                               */
/*****************************************************************************************************************************/

/*                   _
(_)_ __  _ __  _   _| |_
| | `_ \| `_ \| | | | __|
| | | | | |_) | |_| | |_
|_|_| |_| .__/ \__,_|\__|
        |_|
*/

options validvarname=upcase ls=255 ps=65;
libname sd1 "d:/sd1";
data sd1.have;
  input L $ XA XB XC XD XE XF XG XH XI XJ XK;
cards4;
A 30 77 67 87 32 32 29 49 24 67 34
A 56 37 37 25 95 26 64 76 88 59 56
B 19 89 26 80 96 40 16 32 13 79 75
B 36 72 42 30 37 60 13 16 62 94 74
C 17 88 46 88 95 65 29 25 56 34 88
C 48 38 29 71 22 44 15 22 74 49 31
D 92 94 81 88 97 14 19 40 42 72 22
E 47 14 84 31 24 25 52 92 19 69 85
F 69 48 57 77 19 23 31 69 60 21 69
G 68 32 64 13 93 22 87 81 85 60 15
H 10 42 92 27 24 41 55 90 45 14 36
H 84 21 15 13 97 26 86 98 61 42 99
I 35 23 14 97 18 60 80 17 80 44 83
J 40 14 80 78 90 60 15 44 89 65 13
J 72 24 44 49 77 16 40 13 38 83 28
K 84 17 10 24 76 78 56 80 24 27 92
L 13 41 72 54 86 34 84 54 84 87 33
M 53 26 82 55 68 56 31 95 85 90 48
N 43 99 27 46 59 12 64 74 30 27 32
O 98 73 39 47 67 47 74 79 70 50 66
;;;;
run;quit;

/*___
 / _ \   _ __  _ __ ___   ___   ___ _   _ _ __ ___  _ __ ___   __ _ _ __ _   _
| | | | | `_ \| `__/ _ \ / __| / __| | | | `_ ` _ \| `_ ` _ \ / _` | `__| | | |
| |_| | | |_) | | | (_) | (__  \__ \ |_| | | | | | | | | | | | (_| | |  | |_| |
 \___/  | .__/|_|  \___/ \___| |___/\__,_|_| |_| |_|_| |_| |_|\__,_|_|   \__, |
        |_|                                                              |___/
*/

proc summary data=sd1.have nway;
  class l;
  var _numeric_;
  output out=result
    (drop=_type_ _freq_) sum=;
run;

/**************************************************************************************************************************/
/*                                                                                                                        */
/*  RESULT total obs=15                                                                                                   */
/*                                                                                                                        */
/*    L     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                                      */
/*                                                                                                                        */
/*    A     86    114    104    112    127     58     93    125    112    126     90                                      */
/*    B     55    161     68    110    133    100     29     48     75    173    149                                      */
/*    C     65    126     75    159    117    109     44     47    130     83    119                                      */
/*    D     92     94     81     88     97     14     19     40     42     72     22                                      */
/*    E     47     14     84     31     24     25     52     92     19     69     85                                      */
/*    F     69     48     57     77     19     23     31     69     60     21     69                                      */
/*    G     68     32     64     13     93     22     87     81     85     60     15                                      */
/*    H     94     63    107     40    121     67    141    188    106     56    135                                      */
/*    I     35     23     14     97     18     60     80     17     80     44     83                                      */
/*    J    112     38    124    127    167     76     55     57    127    148     41                                      */
/*    K     84     17     10     24     76     78     56     80     24     27     92                                      */
/*    L     13     41     72     54     86     34     84     54     84     87     33                                      */
/*    M     53     26     82     55     68     56     31     95     85     90     48                                      */
/*    N     43     99     27     46     59     12     64     74     30     27     32                                      */
/*    O     98     73     39     47     67     47     74     79     70     50     66                                      */
/*                                                                                                                        */
/*                                                                                                                        */
/**************************************************************************************************************************/


/*                                                    _
/ |  _ __  _ __ ___   ___   _ __ ___ _ __   ___  _ __| |_
| | | `_ \| `__/ _ \ / __| | `__/ _ \ `_ \ / _ \| `__| __|
| | | |_) | | | (_) | (__  | | |  __/ |_) | (_) | |  | |_
|_| | .__/|_|  \___/ \___| |_|  \___| .__/ \___/|_|   \__|
    |_|                             |_|
*/

proc report data=sd1.have out=xcr;
  cols _all_;
  define l / group;
  define _numeric_ / display sum;
run;quit;


*/ /**************************************************************************************************************************/
*/ /*
*/ /* Up to 40 obs from XCR total obs=15 07SEP2024:17:10:36
*/ /*
*/ /*   L     XA     XB         XC         XD         XE         XF         XG         XH         XI         XJ         XK
*/ /*   A     86    114        104        112        127         58         93        125        112        126         90
*/ /*   B     55    161         68        110        133        100         29         48         75        173        149
*/ /*   C     65    126         75        159        117        109         44         47        130         83        119
*/ /*   D     92     94         81         88         97         14         19         40         42         72         22
*/ /*   E     47     14         84         31         24         25         52         92         19         69         85
*/ /*   F     69     48         57         77         19         23         31         69         60         21         69
*/ /*   G     68     32         64         13         93         22         87         81         85         60         15
*/ /*   H     94     63        107         40        121         67        141        188        106         56        135
*/ /*   I     35     23         14         97         18         60         80         17         80         44         83
*/ /*   J    112     38        124        127        167         76         55         57        127        148         41
*/ /*   K     84     17         10         24         76         78         56         80         24         27         92
*/ /*   L     13     41         72         54         86         34         84         54         84         87         33
*/ /*   M     53     26         82         55         68         56         31         95         85         90         48
*/ /*   N     43     99         27         46         59         12         64         74         30         27         32
*/ /*   O     98     73         39         47         67         47         74         79         70         50         66
*/ /*
*/ /*
*/ /**************************************************************************************************************************/

/*___                        _       _            _
|___ \   ___  __ _ ___    __| | __ _| |_ __ _ ___| |_ ___ _ __
  __) | / __|/ _` / __|  / _` |/ _` | __/ _` / __| __/ _ \ `_ \
 / __/  \__ \ (_| \__ \ | (_| | (_| | || (_| \__ \ ||  __/ |_) |
|_____| |___/\__,_|___/  \__,_|\__,_|\__\__,_|___/\__\___| .__/
                                                         |_|
*/

macro numvar(dsn)/des="Nnmber of variables in a SAS dataset";
     %let dsid=%sysfunc(open(&dsn));%sysfunc(attrn(&dsid,nvars)) %let rc=%sysfunc(close(&dsid));
%mend numvar;

data summed_data;
  do until (last.l);
    set sd1.have;
    by l;

    array values[*] _numeric_;
    array sums[%numvar(sd1.have(keep=_numeric_))]

      sumXA sumXB sumXC sumXD sumXE sumXF
      sumXG sumXH sumXI sumXJ sumXK;
    do i = 1 to dim(values);
      sums[i] = sum(sums[i], values[i]);
    end;
  end;

  do i = 1 to dim(values);
    values{i} = sums{i};
  end;

  output;

  keep l sum:;
run;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* WORK.SUMMED_DATA total obs=15                                                                                          */
/*                                                                                                                        */
/*    L    SUMXA    SUMXB    SUMXC    SUMXD    SUMXE    SUMXF    SUMXG    SUMXH    SUMXI    SUMXJ    SUMXK                */
/*                                                                                                                        */
/*    A      86      114      104      112      127       58       93      125      112      126       90                 */
/*    B      55      161       68      110      133      100       29       48       75      173      149                 */
/*    C      65      126       75      159      117      109       44       47      130       83      119                 */
/*    D      92       94       81       88       97       14       19       40       42       72       22                 */
/*    E      47       14       84       31       24       25       52       92       19       69       85                 */
/*    F      69       48       57       77       19       23       31       69       60       21       69                 */
/*    G      68       32       64       13       93       22       87       81       85       60       15                 */
/*    H      94       63      107       40      121       67      141      188      106       56      135                 */
/*    I      35       23       14       97       18       60       80       17       80       44       83                 */
/*    J     112       38      124      127      167       76       55       57      127      148       41                 */
/*    K      84       17       10       24       76       78       56       80       24       27       92                 */
/*    L      13       41       72       54       86       34       84       54       84       87       33                 */
/*    M      53       26       82       55       68       56       31       95       85       90       48                 */
/*    N      43       99       27       46       59       12       64       74       30       27       32                 */
/*    O      98       73       39       47       67       47       74       79       70       50       66                 */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*____                       _
|___ /   ___  __ _ ___    __| | ___     _____   _____ _ __
  |_ \  / __|/ _` / __|  / _` |/ _ \   / _ \ \ / / _ \ `__|
 ___) | \__ \ (_| \__ \ | (_| | (_) | | (_) \ V /  __/ |
|____/  |___/\__,_|___/  \__,_|\___/___\___/ \_/ \___|_|
                                  |_____|
*/

%array(_vs,values = %utl_varlist(sd1.have,keep=_numeric_) );

proc sql;
  create
    table xtab as
  select
    l
   ,%do_over(_vs,phrase=sum(?) as ?,between=comma)
  from
    sd1.have
  group
    by l
;quit;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* Up to 40 obs from XTAB total obs=15 07SEP2024:14:51:24                                                                 */
/* Obs    L     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                                  */
/*                                                                                                                        */
/*   1    A     86    114    104    112    127     58     93    125    112    126     90                                  */
/*   2    B     55    161     68    110    133    100     29     48     75    173    149                                  */
/*   3    C     65    126     75    159    117    109     44     47    130     83    119                                  */
/*   4    D     92     94     81     88     97     14     19     40     42     72     22                                  */
/*   5    E     47     14     84     31     24     25     52     92     19     69     85                                  */
/*   6    F     69     48     57     77     19     23     31     69     60     21     69                                  */
/*   7    G     68     32     64     13     93     22     87     81     85     60     15                                  */
/*   8    H     94     63    107     40    121     67    141    188    106     56    135                                  */
/*   9    I     35     23     14     97     18     60     80     17     80     44     83                                  */
/*  10    J    112     38    124    127    167     76     55     57    127    148     41                                  */
/*  11    K     84     17     10     24     76     78     56     80     24     27     92                                  */
/*  12    L     13     41     72     54     86     34     84     54     84     87     33                                  */
/*  13    M     53     26     82     55     68     56     31     95     85     90     48                                  */
/*  14    N     43     99     27     46     59     12     64     74     30     27     32                                  */
/*  15    O     98     73     39     47     67     47     74     79     70     50     66                                  */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*  _                _
| || |    _ __    __| | ___     _____   _____ _ __
| || |_  | `__|  / _` |/ _ \   / _ \ \ / / _ \ `__|
|__   _| | |    | (_| | (_) | | (_) \ V /  __/ |
   |_|   |_|     \__,_|\___/___\___/ \_/ \___|_|
                          |_____|
*/

%array(_vs,values = %utl_varlist(sd1.have,keep=_numeric_) );

%utl_submit_r64x(resolve('
 library(sqldf);
 library(haven);
 source("c:/oto/fn_tosas9x.R");
 have<-read_sas("d:/sd1/have.sas7bdat");
 have;
 want<-sqldf("
  select
    l
   ,%do_over(_vs,phrase=sum(?) as ?,between=comma)
  from
    have
  group
    by l
  ");
 want;
 fn_tosas9x(
       inp    = want
      ,outlib ="d:/sd1/"
      ,outdsn ="rwant"
      );
'));

proc print data=sd1.rwant;
run;quit;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* R                                                                                                                      */
/*                                                                                                                        */
/*     L  XA  XB  XC  XD  XE  XF  XG  XH  XI  XJ  XK                                                                      */
/*  1  A  86 114 104 112 127  58  93 125 112 126  90                                                                      */
/*  2  B  55 161  68 110 133 100  29  48  75 173 149                                                                      */
/*  3  C  65 126  75 159 117 109  44  47 130  83 119                                                                      */
/*  4  D  92  94  81  88  97  14  19  40  42  72  22                                                                      */
/*  5  E  47  14  84  31  24  25  52  92  19  69  85                                                                      */
/*  6  F  69  48  57  77  19  23  31  69  60  21  69                                                                      */
/*  7  G  68  32  64  13  93  22  87  81  85  60  15                                                                      */
/*  8  H  94  63 107  40 121  67 141 188 106  56 135                                                                      */
/*  9  I  35  23  14  97  18  60  80  17  80  44  83                                                                      */
/*  10 J 112  38 124 127 167  76  55  57 127 148  41                                                                      */
/*  11 K  84  17  10  24  76  78  56  80  24  27  92                                                                      */
/*  12 L  13  41  72  54  86  34  84  54  84  87  33                                                                      */
/*  13 M  53  26  82  55  68  56  31  95  85  90  48                                                                      */
/*  14 N  43  99  27  46  59  12  64  74  30  27  32                                                                      */
/*  15 O  98  73  39  47  67  47  74  79  70  50  66                                                                      */
/*                                                                                                                        */
/* SAS                                                                                                                    */
/*                                                                                                                        */
/*                                                                                                                        */
/*  XTAB total obs=15                                                                                                     */
/*                                                                                                                        */
/*   ROWNAMES    L     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                           */
/*                                                                                                                        */
/*       1       A     86    114    104    112    127     58     93    125    112    126     90                           */
/*       2       B     55    161     68    110    133    100     29     48     75    173    149                           */
/*       3       C     65    126     75    159    117    109     44     47    130     83    119                           */
/*       4       D     92     94     81     88     97     14     19     40     42     72     22                           */
/*       5       E     47     14     84     31     24     25     52     92     19     69     85                           */
/*       6       F     69     48     57     77     19     23     31     69     60     21     69                           */
/*       7       G     68     32     64     13     93     22     87     81     85     60     15                           */
/*       8       H     94     63    107     40    121     67    141    188    106     56    135                           */
/*       9       I     35     23     14     97     18     60     80     17     80     44     83                           */
/*      10       J    112     38    124    127    167     76     55     57    127    148     41                           */
/*      11       K     84     17     10     24     76     78     56     80     24     27     92                           */
/*      12       L     13     41     72     54     86     34     84     54     84     87     33                           */
/*      13       M     53     26     82     55     68     56     31     95     85     90     48                           */
/*      14       N     43     99     27     46     59     12     64     74     30     27     32                           */
/*      15       O     98     73     39     47     67     47     74     79     70     50     66                           */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*___               _   _                       _
| ___|  _ __  _   _| |_| |__   ___  _ __     __| | ___     _____   _____ _ __
|___ \ | `_ \| | | | __| `_ \ / _ \| `_ \   / _` |/ _ \   / _ \ \ / / _ \ `__|
 ___) || |_) | |_| | |_| | | | (_) | | | | | (_| | (_) | | (_) \ V /  __/ |
|____/ | .__/ \__, |\__|_| |_|\___/|_| |_|  \__,_|\___/___\___/ \_/ \___|_|
              |___/                                  |_____|
*/

%array(_vs,values = %utl_varlist(sd1.have,keep=_numeric_) );

%utl_submit_py64_310x(resolve('
 import pyperclip;
 import os;
 from os import path;
 import sys;
 import subprocess;
 import time;
 import pandas as pd;
 import pyreadstat as ps;
 import numpy as np;
 import pandas as pd;
 from pandasql import sqldf;
 mysql = lambda q: sqldf(q, globals());
 from pandasql import PandaSQL;
 pdsql = PandaSQL(persist=True);
 sqlite3conn = next(pdsql.conn.gen).connection.connection;
 sqlite3conn.enable_load_extension(True);
 sqlite3conn.load_extension("c:/temp/libsqlitefunctions.dll");
 mysql = lambda q: sqldf(q, globals());
 have, meta = ps.read_sas7bdat("d:/sd1/have.sas7bdat");
 exec(open("c:/temp/fn_tosas9.py").read());
 print(have);
 want = pdsql("""
  select
    l
   ,%do_over(_vs,phrase=sum(?) as ?,between=comma)
  from
    have
  group
    by l
 """);
 print(want)
 fn_tosas9(
    want
    ,dfstr="pwant"
    ,timeest=3
    );
'));

libname tmp "c:/temp";
proc print data=tmp.pwant;
run;quit;

/**************************************************************************************************************************/
/*                                                                                                                        */
/*  PYTHON                                                                                                                */
/*                                                                                                                        */
/*      L     XA     XB     XC     XD  ...     XG     XH     XI     XJ     XK                                             */
/*  0   A   86.0  114.0  104.0  112.0  ...   93.0  125.0  112.0  126.0   90.0                                             */
/*  1   B   55.0  161.0   68.0  110.0  ...   29.0   48.0   75.0  173.0  149.0                                             */
/*  2   C   65.0  126.0   75.0  159.0  ...   44.0   47.0  130.0   83.0  119.0                                             */
/*  3   D   92.0   94.0   81.0   88.0  ...   19.0   40.0   42.0   72.0   22.0                                             */
/*  4   E   47.0   14.0   84.0   31.0  ...   52.0   92.0   19.0   69.0   85.0                                             */
/*  5   F   69.0   48.0   57.0   77.0  ...   31.0   69.0   60.0   21.0   69.0                                             */
/*  6   G   68.0   32.0   64.0   13.0  ...   87.0   81.0   85.0   60.0   15.0                                             */
/*  7   H   94.0   63.0  107.0   40.0  ...  141.0  188.0  106.0   56.0  135.0                                             */
/*  8   I   35.0   23.0   14.0   97.0  ...   80.0   17.0   80.0   44.0   83.0                                             */
/*  9   J  112.0   38.0  124.0  127.0  ...   55.0   57.0  127.0  148.0   41.0                                             */
/*  10  K   84.0   17.0   10.0   24.0  ...   56.0   80.0   24.0   27.0   92.0                                             */
/*  11  L   13.0   41.0   72.0   54.0  ...   84.0   54.0   84.0   87.0   33.0                                             */
/*  12  M   53.0   26.0   82.0   55.0  ...   31.0   95.0   85.0   90.0   48.0                                             */
/*  13  N   43.0   99.0   27.0   46.0  ...   64.0   74.0   30.0   27.0   32.0                                             */
/*  14  O   98.0   73.0   39.0   47.0  ...   74.0   79.0   70.0   50.0   66.0                                             */
/*                                                                                                                        */
/*  SAS                                                                                                                   */
/*                                                                                                                        */
/*   40 obs from XTAB total obs=15                                                                                        */
/*                                                                                                                        */
/*    L     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                                      */
/*                                                                                                                        */
/*    A     86    114    104    112    127     58     93    125    112    126     90                                      */
/*    B     55    161     68    110    133    100     29     48     75    173    149                                      */
/*    C     65    126     75    159    117    109     44     47    130     83    119                                      */
/*    D     92     94     81     88     97     14     19     40     42     72     22                                      */
/*    E     47     14     84     31     24     25     52     92     19     69     85                                      */
/*    F     69     48     57     77     19     23     31     69     60     21     69                                      */
/*    G     68     32     64     13     93     22     87     81     85     60     15                                      */
/*    H     94     63    107     40    121     67    141    188    106     56    135                                      */
/*    I     35     23     14     97     18     60     80     17     80     44     83                                      */
/*    J    112     38    124    127    167     76     55     57    127    148     41                                      */
/*    K     84     17     10     24     76     78     56     80     24     27     92                                      */
/*    L     13     41     72     54     86     34     84     54     84     87     33                                      */
/*    M     53     26     82     55     68     56     31     95     85     90     48                                      */
/*    N     43     99     27     46     59     12     64     74     30     27     32                                      */
/*    O     98     73     39     47     67     47     74     79     70     50     66                                      */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*__     _        _           _       _
 / /_   | |_ __ _| |__  _   _| | __ _| |_ ___   _ __   ___   _ __ ___   __ _  ___ _ __ ___
| `_ \  | __/ _` | `_ \| | | | |/ _` | __/ _ \ | `_ \ / _ \ | `_ ` _ \ / _` |/ __| `__/ _ \
| (_) | | || (_| | |_) | |_| | | (_| | ||  __/ | | | | (_) || | | | | | (_| | (__| | | (_) |
 \___/   \__\__,_|_.__/ \__,_|_|\__,_|\__\___| |_| |_|\___/ |_| |_| |_|\__,_|\___|_|  \___/

*/
title;
footnote;
proc printto print="%sysfunc(pathname(work))/_tmp1_.txt" new;
options formchar='|';
proc tabulate data=sd1.have;
   format _numeric_ 3.;
   CLASS l;
   VAR _numeric_;
   TABLE l=' ' , (_numeric_)*f=3. *SUM=' '/rts=3;
run;quit;
proc printto;

 /**************************************************************************************************************************/
 /*                                                                                                                        */
 /* YOU HAVE TO USE TABULATE OPTIONS THAT CREATE A LISTING LIKE THIS                                                       */
 /*                                                                                                                        */
 /* sysfunc(pathname(work))/_tmp1_.txt                                                                                     */
 /*                                                                                                                        */
 /* | |XA |XB |XC |XD |XE |XF |XG |XH |XI |XJ |XK |                                                                        */
 /*                                                                                                                        */
 /* |A| 86|114|104|112|127| 58| 93|125|112|126| 90|                                                                        */
 /*                                                                                                                        */
 /* |B| 55|161| 68|110|133|100| 29| 48| 75|173|149|                                                                        */
 /*                                                                                                                        */
 /* |C| 65|126| 75|159|117|109| 44| 47|130| 83|119|                                                                        */
 /*                                                                                                                        */
 /* |D| 92| 94| 81| 88| 97| 14| 19| 40| 42| 72| 22|                                                                        */
 /*                                                                                                                        */
 /* |E| 47| 14| 84| 31| 24| 25| 52| 92| 19| 69| 85|                                                                        */
 /*                                                                                                                        */
 /* |F| 69| 48| 57| 77| 19| 23| 31| 69| 60| 21| 69|                                                                        */
 /*                                                                                                                        */
 /* |G| 68| 32| 64| 13| 93| 22| 87| 81| 85| 60| 15|                                                                        */
 /*                                                                                                                        */
 /* |H| 94| 63|107| 40|121| 67|141|188|106| 56|135|                                                                        */
 /*                                                                                                                        */
 /* |I| 35| 23| 14| 97| 18| 60| 80| 17| 80| 44| 83|                                                                        */
 /*                                                                                                                        */
 /* |J|112| 38|124|127|167| 76| 55| 57|127|148| 41|                                                                        */
 /*                                                                                                                        */
 /* |K| 84| 17| 10| 24| 76| 78| 56| 80| 24| 27| 92|                                                                        */
 /*                                                                                                                        */
 /* |L| 13| 41| 72| 54| 86| 34| 84| 54| 84| 87| 33|                                                                        */
 /*                                                                                                                        */
 /* |M| 53| 26| 82| 55| 68| 56| 31| 95| 85| 90| 48|                                                                        */
 /*                                                                                                                        */
 /* |N| 43| 99| 27| 46| 59| 12| 64| 74| 30| 27| 32|                                                                        */
 /*                                                                                                                        */
 /* |O| 98| 73| 39| 47| 67| 47| 74| 79| 70| 50| 66|                                                                        */
 /*                                                                                                                        */
 /**************************************************************************************************************************/

* MINOR CHANGES TO TABULATE PRINT OUTPUT;

data _null_;
 infile "%sysfunc(pathname(work))/_tmp1_.txt";
 file   "%sysfunc(pathname(work))/_tmp2_.txt";
 input;
 if not missing(_infile_);
 _infile_=substr(_infile_,2);
 _infile_=substr(_infile_,1,length(_infile_)-1);
 putlog _infile_;
 put _infile_;
run;quit;

/**************************************************************************************************************************/
/*                                                                                                                        */
/* sysfunc(pathname(work))/_tmp1_.txt                                                                                     */
/*                                                                                                                        */
/*  |XA |XB |XC |XD |XE |XF |XG |XH |XI |XJ |XK                                                                           */
/* A| 86|114|104|112|127| 58| 93|125|112|126| 90                                                                          */
/* B| 55|161| 68|110|133|100| 29| 48| 75|173|149                                                                          */
/* C| 65|126| 75|159|117|109| 44| 47|130| 83|119                                                                          */
/* D| 92| 94| 81| 88| 97| 14| 19| 40| 42| 72| 22                                                                          */
/* E| 47| 14| 84| 31| 24| 25| 52| 92| 19| 69| 85                                                                          */
/* F| 69| 48| 57| 77| 19| 23| 31| 69| 60| 21| 69                                                                          */
/* G| 68| 32| 64| 13| 93| 22| 87| 81| 85| 60| 15                                                                          */
/* H| 94| 63|107| 40|121| 67|141|188|106| 56|135                                                                          */
/* I| 35| 23| 14| 97| 18| 60| 80| 17| 80| 44| 83                                                                          */
/* J|112| 38|124|127|167| 76| 55| 57|127|148| 41                                                                          */
/* K| 84| 17| 10| 24| 76| 78| 56| 80| 24| 27| 92                                                                          */
/* L| 13| 41| 72| 54| 86| 34| 84| 54| 84| 87| 33                                                                          */
/* M| 53| 26| 82| 55| 68| 56| 31| 95| 85| 90| 48                                                                          */
/* N| 43| 99| 27| 46| 59| 12| 64| 74| 30| 27| 32                                                                          */
/* O| 98| 73| 39| 47| 67| 47| 74| 79| 70| 50| 66                                                                          */
/*                                                                                                                        */
/**************************************************************************************************************************/

title;
footnote;
proc import
   datafile="%sysfunc(pathname(work))/_tmp2_.txt"
   dbms=dlm
   out=xtab_ table(rename=var1=ltr)
   replace;
   delimiter='|';
   getnames=yes;
run;quit;
/*           _               _
  ___  _   _| |_ _ __  _   _| |_
 / _ \| | | | __| `_ \| | | | __|
| (_) | |_| | |_| |_) | |_| | |_
 \___/ \__,_|\__| .__/ \__,_|\__|
                |_|
*/
/**************************************************************************************************************************/
/*                                                                                                                        */
/* XTAB_TABLE total obs=15 (SAS DATASET)                                                                                  */
/*                                                                                                                        */
/* Obs    LTR     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                                */
/*                                                                                                                        */
/*   1     A      86    114    104    112    127     58     93    125    112    126     90                                */
/*   2     B      55    161     68    110    133    100     29     48     75    173    149                                */
/*   3     C      65    126     75    159    117    109     44     47    130     83    119                                */
/*   4     D      92     94     81     88     97     14     19     40     42     72     22                                */
/*   5     E      47     14     84     31     24     25     52     92     19     69     85                                */
/*   6     F      69     48     57     77     19     23     31     69     60     21     69                                */
/*   7     G      68     32     64     13     93     22     87     81     85     60     15                                */
/*   8     H      94     63    107     40    121     67    141    188    106     56    135                                */
/*   9     I      35     23     14     97     18     60     80     17     80     44     83                                */
/*  10     J     112     38    124    127    167     76     55     57    127    148     41                                */
/*  11     K      84     17     10     24     76     78     56     80     24     27     92                                */
/*  12     L      13     41     72     54     86     34     84     54     84     87     33                                */
/*  13     M      53     26     82     55     68     56     31     95     85     90     48                                */
/*  14     N      43     99     27     46     59     12     64     74     30     27     32                                */
/*  15     O      98     73     39     47     67     47     74     79     70     50     66                                */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*____  _        _           _       _                  _ _   _
|___  || |_ __ _| |__  _   _| | __ _| |_ ___  __      _(_) |_| |__    _ __ ___   __ _  ___ _ __ ___
   / / | __/ _` | `_ \| | | | |/ _` | __/ _ \ \ \ /\ / / | __| `_ \  | `_ ` _ \ / _` |/ __| `__/ _ \
  / /  | || (_| | |_) | |_| | | (_| | ||  __/  \ V  V /| | |_| | | | | | | | | | (_| | (__| | | (_) |
 /_/    \__\__,_|_.__/ \__,_|_|\__,_|\__\___|   \_/\_/ |_|\__|_| |_| |_| |_| |_|\__,_|\___|_|  \___/

*/     */
options ls=255;
%utl_dattab(setup);
options formchar='|';
proc tabulate data=sd1.have;
   format _numeric_ 3.;
   CLASS l;
   VAR _numeric_;
   TABLE l=' ' , (_numeric_)*f=3. *SUM=' '/rts=3;
run;quit;
%utl_dattab(outdsn=datwant);

/*
 _ __ ___   __ _  ___ _ __ ___
| `_ ` _ \ / _` |/ __| `__/ _ \
| | | | | | (_| | (__| | | (_) |
|_| |_| |_|\__,_|\___|_|  \___/

*/

%macro utl_dattab(outdsn);
   title;
   footnote;
   proc datasets lib=work nolist;  *just in case;
    delete &outdsn;
   run;quit;
   %if %qupcase(&outdsn)=SETUP %then %do;
        %utlfkil(%sysfunc(pathname(work))/_tmp1_.txt);
        OPTIONS ls=max ps=32756  FORMCHAR='|'  nodate nocenter;
        proc printto print="%sysfunc(pathname(work))/_tmp1_.txt" new;
        run;quit;
   %end;
   %else %do;
        proc printto;
        run;quit;
        data _null_;
         infile "%sysfunc(pathname(work))/_tmp1_.txt";
         file   "%sysfunc(pathname(work))/_tmp2_.txt";
         input;
         if not missing(_infile_);
         _infile_=substr(_infile_,2);
         _infile_=substr(_infile_,1,length(_infile_)-1);
         putlog _infile_;
         put _infile_;
        run;quit;
        title;
        footnote;
        proc import
           datafile="%sysfunc(pathname(work))/_tmp2_.txt"
           dbms=dlm
           out=&outdsn
           replace;
           delimiter='|';
           getnames=yes;
        run;quit;
   %end;
   options formchar='|----|+|---+=|-/\<>*';
%mend utl_dattab;


/**************************************************************************************************************************/
/*                                                                                                                        */
/* DATWANT total obs=15                                                                                                   */
/*                                                                                                                        */
/*  VAR1     XA     XB     XC     XD     XE     XF     XG     XH     XI     XJ     XK                                     */
/*                                                                                                                        */
/*   A       86    114    104    112    127     58     93    125    112    126     90                                     */
/*   B       55    161     68    110    133    100     29     48     75    173    149                                     */
/*   C       65    126     75    159    117    109     44     47    130     83    119                                     */
/*   D       92     94     81     88     97     14     19     40     42     72     22                                     */
/*   E       47     14     84     31     24     25     52     92     19     69     85                                     */
/*   F       69     48     57     77     19     23     31     69     60     21     69                                     */
/*   G       68     32     64     13     93     22     87     81     85     60     15                                     */
/*   H       94     63    107     40    121     67    141    188    106     56    135                                     */
/*   I       35     23     14     97     18     60     80     17     80     44     83                                     */
/*   J      112     38    124    127    167     76     55     57    127    148     41                                     */
/*   K       84     17     10     24     76     78     56     80     24     27     92                                     */
/*   L       13     41     72     54     86     34     84     54     84     87     33                                     */
/*   M       53     26     82     55     68     56     31     95     85     90     48                                     */
/*   N       43     99     27     46     59     12     64     74     30     27     32                                     */
/*   O       98     73     39     47     67     47     74     79     70     50     66                                     */
/*                                                                                                                        */
/**************************************************************************************************************************/

/*___
 ( _ )   _ __ ___ _ __   ___  ___
 / _ \  | `__/ _ \ `_ \ / _ \/ __|
| (_) | | | |  __/ |_) | (_) \__ \
 \___/  |_|  \___| .__/ \___/|___/
                 |_|
*/


RELATED REPOS, HOWEVER THAT ALL REQUIRE NORMALIZED SKINNY INPUT

https://github.com/rogerjdeangelis/utl_sort_summarize_and_transpose_multiple_variable_and_create_output_dataset
https://github.com/rogerjdeangelis/utl_sort_summarize_transpose_and_format_in_1_datastep
https://github.com/rogerjdeangelis/utl_sort_transpose_and_summarize_a_dataset_using_just_one_proc_report
https://github.com/rogerjdeangelis/utl-sort-summarize-transpose-with-minimal-code-in-one-proc
https://github.com/rogerjdeangelis/utl-create-a-sorted-summarized-and-transposed-crosstab-dataset-using-a-single-proc
https://github.com/rogerjdeangelis/utl_sort_transpose_summarize
https://github.com/rogerjdeangelis/utl_more_flexible_and_maintainable_crosstab_than_proc_tabulate
https://github.com/rogerjdeangelis/utl-is-proc-report-more-flexible-than-proc-summary-or-tabulate-when-an-output-dataset-is-needed
https://github.com/rogerjdeangelis/utl-are-procedures-that-create-tables-better-than-proc-tabulate-output
https://github.com/rogerjdeangelis/utl-avoiding-tabulate-in-order-to-get-a-sas-dataset-for-a-three-dimensional-crosstab
https://github.com/rogerjdeangelis/utl-complex-proc-tabulate-in-proc-report-with-output-table-that-is-an-image-of-tabulate
https://github.com/rogerjdeangelis/utl-conformal-ods-table-output-for-proc-tabulate-and-proc-freq
https://github.com/rogerjdeangelis/utl-create-a-crosstab-dataset-instead-of-a-listing-from-proc-tabulate
https://github.com/rogerjdeangelis/utl-create-useful-column-names-from-tabulate-output
https://github.com/rogerjdeangelis/utl-fixing-bugs-in-proc-report-tabulate-and-freq-output-crosstab-datasets
https://github.com/rogerjdeangelis/utl-how-to-get-a-sas-dataset-like-the-tabulate-listing
https://github.com/rogerjdeangelis/utl-reshape-table-use-utl_odsrpt-macro-and-proc-tabulate
https://github.com/rogerjdeangelis/utl-use-freq-and-corresp-table-output-to-avoid-tabulate-static-printouts
https://github.com/rogerjdeangelis/utl-using-excel-to-get-a-usefull-proc-tabulate-output-table

/*              _
  ___ _ __   __| |
 / _ \ `_ \ / _` |
|  __/ | | | (_| |
 \___|_| |_|\__,_|

*/

